{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swotj\\\\Desktop\\\\MTVS4_LLM-main\\\\frontend\\\\src\\\\components\\\\ReviewPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchDueCards, fetchHint, reviewCard, createCard, getWebhook, setWebhook } from \"../services/api\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport RelatedConceptModal from \"./RelatedConceptModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ReviewPage() {\n  _s();\n  const [dueCards, setDueCards] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [testMode, setTestMode] = useState(false);\n  const [currentAnswer, setCurrentAnswer] = useState({});\n  const [feedbacks, setFeedbacks] = useState({});\n  const [submitted, setSubmitted] = useState({});\n  const [retryMode, setRetryMode] = useState({});\n  const [countdown, setCountdown] = useState({});\n  const [loadingCard, setLoadingCard] = useState({});\n  const [relatedList, setRelatedList] = useState([]);\n  const [selectedCardId, setSelectedCardId] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [webhookUrl, setWebhookUrl] = useState(\"\");\n  const [showSaveConfirm, setShowSaveConfirm] = useState(false);\n\n  // 카드 로드\n  const loadDueCards = async () => {\n    setLoading(true);\n    try {\n      const data = await fetchDueCards(testMode);\n      setDueCards(data);\n      const initText = {},\n        initFeedback = {},\n        initSubmitted = {},\n        initRetry = {},\n        initCountdown = {},\n        initLoading = {};\n      data.forEach(c => {\n        initText[c.card_id] = \"\";\n        initFeedback[c.card_id] = \"\";\n        initSubmitted[c.card_id] = false;\n        initRetry[c.card_id] = false;\n        initCountdown[c.card_id] = 0;\n        initLoading[c.card_id] = false;\n        c.hint = c.hint || \"\";\n      });\n      setCurrentAnswer(initText);\n      setFeedbacks(initFeedback);\n      setSubmitted(initSubmitted);\n      setRetryMode(initRetry);\n      setCountdown(initCountdown);\n      setLoadingCard(initLoading);\n      data.forEach(async card => {\n        const {\n          card_id,\n          card_type,\n          stage\n        } = card;\n        const needHint = card_type === \"word\" && [3, 4].includes(stage) || card_type === \"concept\" && [2, 3, 4].includes(stage);\n        if (needHint) {\n          try {\n            const hintText = await fetchHint(card_id);\n            setDueCards(prev => prev.map(item => item.card_id === card_id ? {\n              ...item,\n              hint: hintText\n            } : item));\n          } catch {\n            // 힌트 로딩 실패 시 무시\n          }\n        }\n      });\n    } catch {\n      console.error(\"복습 카드 로드 실패\");\n    }\n    setLoading(false);\n  };\n\n  // 최초 로드: 카드 + Webhook\n  useEffect(() => {\n    loadDueCards();\n    (async () => {\n      try {\n        const url = await getWebhook();\n        setWebhookUrl(url);\n      } catch {\n        // 무시\n      }\n    })();\n  }, [testMode]);\n\n  // 카운트다운 로직\n  useEffect(() => {\n    const intervals = [];\n    Object.entries(countdown).forEach(([card_id, timeLeft]) => {\n      if (timeLeft > 0) {\n        const id = setInterval(() => {\n          setCountdown(prev => ({\n            ...prev,\n            [card_id]: prev[card_id] - 1\n          }));\n        }, 1000);\n        intervals.push(id);\n      } else if (timeLeft === 0 && !retryMode[card_id] && submitted[card_id]) {\n        setRetryMode(prev => ({\n          ...prev,\n          [card_id]: true\n        }));\n        setSubmitted(prev => ({\n          ...prev,\n          [card_id]: false\n        }));\n      }\n    });\n    return () => intervals.forEach(clearInterval);\n  }, [countdown, retryMode, submitted]);\n  const handleChangeAnswer = (card_id, text) => {\n    setCurrentAnswer(prev => ({\n      ...prev,\n      [card_id]: text\n    }));\n  };\n  const handleSubmitAnswer = async card => {\n    const id = card.card_id;\n    if (submitted[id] && !retryMode[id] || countdown[id] > 0) return;\n    setLoadingCard(prev => ({\n      ...prev,\n      [id]: true\n    }));\n    setSubmitted(prev => ({\n      ...prev,\n      [id]: true\n    }));\n    setFeedbacks(prev => ({\n      ...prev,\n      [id]: \"확인 중...\"\n    }));\n    try {\n      var _result$related_conce;\n      const result = await reviewCard(id, currentAnswer[id], testMode, retryMode[id]);\n      setFeedbacks(prev => ({\n        ...prev,\n        [id]: result.feedback\n      }));\n      if (result.completed && ((_result$related_conce = result.related_concepts) === null || _result$related_conce === void 0 ? void 0 : _result$related_conce.length) > 0) {\n        setRelatedList(result.related_concepts);\n        setSelectedCardId(id);\n        setIsModalOpen(true);\n        return;\n      }\n      if (result.is_correct) {\n        setTimeout(() => alert(\"✅ 정답입니다!\"), 50);\n        loadDueCards();\n        return;\n      }\n      if (result.retry_allowed) {\n        const wait = testMode ? 5 : 30;\n        setCountdown(prev => ({\n          ...prev,\n          [id]: wait\n        }));\n        setSubmitted(prev => ({\n          ...prev,\n          [id]: false\n        }));\n        return;\n      }\n      setTimeout(() => alert(\"❌ 오답입니다. 단계가 1로 초기화됩니다.\"), 50);\n      loadDueCards();\n    } catch {\n      console.error(\"제출 오류\");\n    } finally {\n      setLoadingCard(prev => ({\n        ...prev,\n        [id]: false\n      }));\n    }\n  };\n  const handleSelectRelated = async concept => {\n    const newCard = await createCard({\n      concept,\n      answer: \"\",\n      card_type: \"concept\"\n    });\n    alert(`✅ '${concept}' 카드가 생성되었습니다!\\n정의: ${newCard.answer}`);\n    setIsModalOpen(false);\n    setRelatedList([]);\n    setSelectedCardId(null);\n    loadDueCards();\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setRelatedList([]);\n    setSelectedCardId(null);\n  };\n  const saveWebhook = async () => {\n    try {\n      await setWebhook(webhookUrl);\n      setShowSaveConfirm(true);\n      setTimeout(() => setShowSaveConfirm(false), 2000);\n    } catch {\n      console.error(\"Webhook 저장 실패\");\n    }\n  };\n\n  // 로딩 스켈레톤\n  const renderLoadingSkeleton = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6 mt-4\",\n      children: [...Array(3)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-pulse\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-6 bg-gray-300 rounded-lg w-2/5 mb-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-5 bg-gray-300 rounded-lg w-3/4 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-8 bg-gray-200 rounded-lg w-full mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 max-w-3xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-semibold text-primary\",\n          children: \"\\uBCF5\\uC2B5\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: testMode,\n            onChange: () => setTestMode(!testMode),\n            className: \"form-checkbox h-5 w-5 text-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: \"\\uD14C\\uC2A4\\uD2B8 \\uBAA8\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"card-container mb-6\",\n        initial: {\n          opacity: 0,\n          y: -20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.4\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-medium mb-2\",\n          children: \"Discord Webhook \\uC124\\uC815\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row sm:space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: webhookUrl,\n            onChange: e => setWebhookUrl(e.target.value),\n            placeholder: \"Webhook URL \\uC785\\uB825\",\n            className: \"input-field mb-3 sm:mb-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveWebhook,\n            className: \"button-primary\",\n            children: \"\\uC800\\uC7A5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: showSaveConfirm && /*#__PURE__*/_jsxDEV(motion.p, {\n            className: \"mt-2 text-sm text-green-600\",\n            initial: {\n              opacity: 0\n            },\n            animate: {\n              opacity: 1\n            },\n            exit: {\n              opacity: 0\n            },\n            children: \"Webhook URL\\uC774 \\uC800\\uC7A5\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), renderLoadingSkeleton()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-semibold text-primary\",\n        children: \"\\uBCF5\\uC2B5\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: testMode,\n          onChange: () => setTestMode(!testMode),\n          className: \"form-checkbox h-5 w-5 text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: \"\\uD14C\\uC2A4\\uD2B8 \\uBAA8\\uB4DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"card-container mb-6\",\n      initial: {\n        opacity: 0,\n        y: -20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      transition: {\n        duration: 0.4\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-medium mb-2\",\n        children: \"Discord Webhook \\uC124\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row sm:space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: webhookUrl,\n          onChange: e => setWebhookUrl(e.target.value),\n          placeholder: \"Webhook URL \\uC785\\uB825\",\n          className: \"input-field mb-3 sm:mb-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveWebhook,\n          className: \"button-primary\",\n          children: \"\\uC800\\uC7A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: showSaveConfirm && /*#__PURE__*/_jsxDEV(motion.p, {\n          className: \"mt-2 text-sm text-green-600\",\n          initial: {\n            opacity: 0\n          },\n          animate: {\n            opacity: 1\n          },\n          exit: {\n            opacity: 0\n          },\n          children: \"Webhook URL\\uC774 \\uC800\\uC7A5\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), dueCards.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500\",\n      children: \"\\uD604\\uC7AC \\uBCF5\\uC2B5\\uD560 \\uCE74\\uB4DC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }, this) : dueCards.map(card => {\n      const id = card.card_id;\n      return /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"card-container mb-6\",\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-lg mb-2\",\n          children: [\"\\uBB38\\uC81C: \", card.concept]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 mb-3\",\n          children: card.stage === 1 ? \"\" : card.hint || \"힌트 로딩 중...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: currentAnswer[id] || \"\",\n          onChange: e => handleChangeAnswer(id, e.target.value),\n          placeholder: countdown[id] > 0 ? `대기 중: ${countdown[id]}초` : retryMode[id] ? \"재시도하세요\" : \"정답을 입력하세요\",\n          disabled: submitted[id] && !retryMode[id] || countdown[id] > 0,\n          className: \"input-field mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSubmitAnswer(card),\n          disabled: submitted[id] && !retryMode[id] || countdown[id] > 0,\n          className: `flex items-center justify-center ${submitted[id] && !retryMode[id] || countdown[id] > 0 ? \"bg-gray-300 cursor-not-allowed\" : \"button-primary\"}`,\n          children: loadingCard[id] ? /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 19\n          }, this) : countdown[id] > 0 ? `대기 중 (${countdown[id]}초)` : submitted[id] && !retryMode[id] ? \"제출 완료\" : retryMode[id] ? \"재시도\" : \"제출\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: feedbacks[id] && /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0\n            },\n            animate: {\n              opacity: 1\n            },\n            exit: {\n              opacity: 0\n            },\n            className: \"mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-base text-gray-700\",\n              children: [\"\\uD53C\\uB4DC\\uBC31: \", feedbacks[id]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 15\n        }, this), !testMode && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-400 mt-2\",\n          children: [\"\\uD604\\uC7AC \\uB2E8\\uACC4: \", card.stage, \" | \\uB2E4\\uC74C \\uBCF5\\uC2B5:\", \" \", card.next_review ? new Date(card.next_review).toLocaleString(\"ko-KR\") : \"-\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 17\n        }, this)]\n      }, id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(RelatedConceptModal, {\n      isOpen: isModalOpen,\n      relatedList: relatedList,\n      onSelect: handleSelectRelated,\n      onClose: handleCloseModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewPage, \"ZlPgEYxzCCMKTm3ybofNtOq35Xg=\");\n_c = ReviewPage;\nvar _c;\n$RefreshReg$(_c, \"ReviewPage\");","map":{"version":3,"names":["React","useEffect","useState","fetchDueCards","fetchHint","reviewCard","createCard","getWebhook","setWebhook","motion","AnimatePresence","RelatedConceptModal","jsxDEV","_jsxDEV","ReviewPage","_s","dueCards","setDueCards","loading","setLoading","testMode","setTestMode","currentAnswer","setCurrentAnswer","feedbacks","setFeedbacks","submitted","setSubmitted","retryMode","setRetryMode","countdown","setCountdown","loadingCard","setLoadingCard","relatedList","setRelatedList","selectedCardId","setSelectedCardId","isModalOpen","setIsModalOpen","webhookUrl","setWebhookUrl","showSaveConfirm","setShowSaveConfirm","loadDueCards","data","initText","initFeedback","initSubmitted","initRetry","initCountdown","initLoading","forEach","c","card_id","hint","card","card_type","stage","needHint","includes","hintText","prev","map","item","console","error","url","intervals","Object","entries","timeLeft","id","setInterval","push","clearInterval","handleChangeAnswer","text","handleSubmitAnswer","_result$related_conce","result","feedback","completed","related_concepts","length","is_correct","setTimeout","alert","retry_allowed","wait","handleSelectRelated","concept","newCard","answer","handleCloseModal","saveWebhook","renderLoadingSkeleton","className","children","Array","_","i","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","div","initial","opacity","y","animate","transition","duration","value","e","target","placeholder","onClick","p","exit","disabled","next_review","Date","toLocaleString","isOpen","onSelect","onClose","_c","$RefreshReg$"],"sources":["C:/Users/swotj/Desktop/MTVS4_LLM-main/frontend/src/components/ReviewPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  fetchDueCards,\n  fetchHint,\n  reviewCard,\n  createCard,\n  getWebhook,\n  setWebhook,\n} from \"../services/api\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport RelatedConceptModal from \"./RelatedConceptModal\";\n\nexport default function ReviewPage() {\n  const [dueCards, setDueCards] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [testMode, setTestMode] = useState(false);\n  const [currentAnswer, setCurrentAnswer] = useState({});\n  const [feedbacks, setFeedbacks] = useState({});\n  const [submitted, setSubmitted] = useState({});\n  const [retryMode, setRetryMode] = useState({});\n  const [countdown, setCountdown] = useState({});\n  const [loadingCard, setLoadingCard] = useState({});\n\n  const [relatedList, setRelatedList] = useState([]);\n  const [selectedCardId, setSelectedCardId] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const [webhookUrl, setWebhookUrl] = useState(\"\");\n  const [showSaveConfirm, setShowSaveConfirm] = useState(false);\n\n  // 카드 로드\n  const loadDueCards = async () => {\n    setLoading(true);\n    try {\n      const data = await fetchDueCards(testMode);\n      setDueCards(data);\n\n      const initText = {},\n        initFeedback = {},\n        initSubmitted = {},\n        initRetry = {},\n        initCountdown = {},\n        initLoading = {};\n\n      data.forEach((c) => {\n        initText[c.card_id] = \"\";\n        initFeedback[c.card_id] = \"\";\n        initSubmitted[c.card_id] = false;\n        initRetry[c.card_id] = false;\n        initCountdown[c.card_id] = 0;\n        initLoading[c.card_id] = false;\n        c.hint = c.hint || \"\";\n      });\n\n      setCurrentAnswer(initText);\n      setFeedbacks(initFeedback);\n      setSubmitted(initSubmitted);\n      setRetryMode(initRetry);\n      setCountdown(initCountdown);\n      setLoadingCard(initLoading);\n\n      data.forEach(async (card) => {\n        const { card_id, card_type, stage } = card;\n        const needHint =\n          (card_type === \"word\" && [3, 4].includes(stage)) ||\n          (card_type === \"concept\" && [2, 3, 4].includes(stage));\n        if (needHint) {\n          try {\n            const hintText = await fetchHint(card_id);\n            setDueCards((prev) =>\n              prev.map((item) =>\n                item.card_id === card_id ? { ...item, hint: hintText } : item\n              )\n            );\n          } catch {\n            // 힌트 로딩 실패 시 무시\n          }\n        }\n      });\n    } catch {\n      console.error(\"복습 카드 로드 실패\");\n    }\n    setLoading(false);\n  };\n\n  // 최초 로드: 카드 + Webhook\n  useEffect(() => {\n    loadDueCards();\n    (async () => {\n      try {\n        const url = await getWebhook();\n        setWebhookUrl(url);\n      } catch {\n        // 무시\n      }\n    })();\n  }, [testMode]);\n\n  // 카운트다운 로직\n  useEffect(() => {\n    const intervals = [];\n    Object.entries(countdown).forEach(([card_id, timeLeft]) => {\n      if (timeLeft > 0) {\n        const id = setInterval(() => {\n          setCountdown((prev) => ({\n            ...prev,\n            [card_id]: prev[card_id] - 1,\n          }));\n        }, 1000);\n        intervals.push(id);\n      } else if (timeLeft === 0 && !retryMode[card_id] && submitted[card_id]) {\n        setRetryMode((prev) => ({ ...prev, [card_id]: true }));\n        setSubmitted((prev) => ({ ...prev, [card_id]: false }));\n      }\n    });\n    return () => intervals.forEach(clearInterval);\n  }, [countdown, retryMode, submitted]);\n\n  const handleChangeAnswer = (card_id, text) => {\n    setCurrentAnswer((prev) => ({ ...prev, [card_id]: text }));\n  };\n\n  const handleSubmitAnswer = async (card) => {\n    const id = card.card_id;\n    if ((submitted[id] && !retryMode[id]) || countdown[id] > 0) return;\n\n    setLoadingCard((prev) => ({ ...prev, [id]: true }));\n    setSubmitted((prev) => ({ ...prev, [id]: true }));\n    setFeedbacks((prev) => ({ ...prev, [id]: \"확인 중...\" }));\n\n    try {\n      const result = await reviewCard(\n        id,\n        currentAnswer[id],\n        testMode,\n        retryMode[id]\n      );\n      setFeedbacks((prev) => ({ ...prev, [id]: result.feedback }));\n\n      if (result.completed && result.related_concepts?.length > 0) {\n        setRelatedList(result.related_concepts);\n        setSelectedCardId(id);\n        setIsModalOpen(true);\n        return;\n      }\n\n      if (result.is_correct) {\n        setTimeout(() => alert(\"✅ 정답입니다!\"), 50);\n        loadDueCards();\n        return;\n      }\n\n      if (result.retry_allowed) {\n        const wait = testMode ? 5 : 30;\n        setCountdown((prev) => ({ ...prev, [id]: wait }));\n        setSubmitted((prev) => ({ ...prev, [id]: false }));\n        return;\n      }\n\n      setTimeout(() => alert(\"❌ 오답입니다. 단계가 1로 초기화됩니다.\"), 50);\n      loadDueCards();\n    } catch {\n      console.error(\"제출 오류\");\n    } finally {\n      setLoadingCard((prev) => ({ ...prev, [id]: false }));\n    }\n  };\n\n  const handleSelectRelated = async (concept) => {\n    const newCard = await createCard({\n      concept,\n      answer: \"\",\n      card_type: \"concept\",\n    });\n    alert(`✅ '${concept}' 카드가 생성되었습니다!\\n정의: ${newCard.answer}`);\n    setIsModalOpen(false);\n    setRelatedList([]);\n    setSelectedCardId(null);\n    loadDueCards();\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setRelatedList([]);\n    setSelectedCardId(null);\n  };\n\n  const saveWebhook = async () => {\n    try {\n      await setWebhook(webhookUrl);\n      setShowSaveConfirm(true);\n      setTimeout(() => setShowSaveConfirm(false), 2000);\n    } catch {\n      console.error(\"Webhook 저장 실패\");\n    }\n  };\n\n  // 로딩 스켈레톤\n  const renderLoadingSkeleton = () => {\n    return (\n      <div className=\"space-y-6 mt-4\">\n        {[...Array(3)].map((_, i) => (\n          <div key={i} className=\"animate-pulse\">\n            <div className=\"h-6 bg-gray-300 rounded-lg w-2/5 mb-2\"></div>\n            <div className=\"h-5 bg-gray-300 rounded-lg w-3/4 mb-4\"></div>\n            <div className=\"h-8 bg-gray-200 rounded-lg w-full mb-4\"></div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 max-w-3xl mx-auto\">\n        {/* 헤더 */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-semibold text-primary\">복습하기</h1>\n          <label className=\"flex items-center space-x-2\">\n            <input\n              type=\"checkbox\"\n              checked={testMode}\n              onChange={() => setTestMode(!testMode)}\n              className=\"form-checkbox h-5 w-5 text-primary\"\n            />\n            <span className=\"text-sm\">테스트 모드</span>\n          </label>\n        </div>\n\n        {/* Webhook 설정 카드 */}\n        <motion.div\n          className=\"card-container mb-6\"\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4 }}\n        >\n          <p className=\"font-medium mb-2\">Discord Webhook 설정</p>\n          <div className=\"flex flex-col sm:flex-row sm:space-x-4\">\n            <input\n              type=\"text\"\n              value={webhookUrl}\n              onChange={(e) => setWebhookUrl(e.target.value)}\n              placeholder=\"Webhook URL 입력\"\n              className=\"input-field mb-3 sm:mb-0\"\n            />\n            <button onClick={saveWebhook} className=\"button-primary\">\n              저장\n            </button>\n          </div>\n          <AnimatePresence>\n            {showSaveConfirm && (\n              <motion.p\n                className=\"mt-2 text-sm text-green-600\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n              >\n                Webhook URL이 저장되었습니다.\n              </motion.p>\n            )}\n          </AnimatePresence>\n        </motion.div>\n\n        {renderLoadingSkeleton()}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 max-w-3xl mx-auto\">\n      {/* 헤더 */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-3xl font-semibold text-primary\">복습하기</h1>\n        <label className=\"flex items-center space-x-2\">\n          <input\n            type=\"checkbox\"\n            checked={testMode}\n            onChange={() => setTestMode(!testMode)}\n            className=\"form-checkbox h-5 w-5 text-primary\"\n          />\n          <span className=\"text-sm\">테스트 모드</span>\n        </label>\n      </div>\n\n      {/* Webhook 설정 카드 */}\n      <motion.div\n        className=\"card-container mb-6\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.4 }}\n      >\n        <p className=\"font-medium mb-2\">Discord Webhook 설정</p>\n        <div className=\"flex flex-col sm:flex-row sm:space-x-4\">\n          <input\n            type=\"text\"\n            value={webhookUrl}\n            onChange={(e) => setWebhookUrl(e.target.value)}\n            placeholder=\"Webhook URL 입력\"\n            className=\"input-field mb-3 sm:mb-0\"\n          />\n          <button onClick={saveWebhook} className=\"button-primary\">\n            저장\n          </button>\n        </div>\n        <AnimatePresence>\n          {showSaveConfirm && (\n            <motion.p\n              className=\"mt-2 text-sm text-green-600\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n            >\n              Webhook URL이 저장되었습니다.\n            </motion.p>\n          )}\n        </AnimatePresence>\n      </motion.div>\n\n      {/* 복습 카드 목록 */}\n      {dueCards.length === 0 ? (\n        <p className=\"text-center text-gray-500\">현재 복습할 카드가 없습니다.</p>\n      ) : (\n        dueCards.map((card) => {\n          const id = card.card_id;\n          return (\n            <motion.div\n              key={id}\n              className=\"card-container mb-6\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <p className=\"font-semibold text-lg mb-2\">문제: {card.concept}</p>\n              <p className=\"text-gray-500 mb-3\">\n                {card.stage === 1 ? \"\" : card.hint || \"힌트 로딩 중...\"}\n              </p>\n\n              <input\n                type=\"text\"\n                value={currentAnswer[id] || \"\"}\n                onChange={(e) => handleChangeAnswer(id, e.target.value)}\n                placeholder={\n                  countdown[id] > 0\n                    ? `대기 중: ${countdown[id]}초`\n                    : retryMode[id]\n                    ? \"재시도하세요\"\n                    : \"정답을 입력하세요\"\n                }\n                disabled={(submitted[id] && !retryMode[id]) || countdown[id] > 0}\n                className=\"input-field mb-4\"\n              />\n\n              <button\n                onClick={() => handleSubmitAnswer(card)}\n                disabled={(submitted[id] && !retryMode[id]) || countdown[id] > 0}\n                className={`flex items-center justify-center ${\n                  (submitted[id] && !retryMode[id]) || countdown[id] > 0\n                    ? \"bg-gray-300 cursor-not-allowed\"\n                    : \"button-primary\"\n                }`}\n              >\n                {loadingCard[id] ? (\n                  <motion.div className=\"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : countdown[id] > 0 ? (\n                  `대기 중 (${countdown[id]}초)`\n                ) : submitted[id] && !retryMode[id] ? (\n                  \"제출 완료\"\n                ) : retryMode[id] ? (\n                  \"재시도\"\n                ) : (\n                  \"제출\"\n                )}\n              </button>\n\n              <AnimatePresence>\n                {feedbacks[id] && (\n                  <motion.div\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    className=\"mt-3\"\n                  >\n                    <p className=\"text-base text-gray-700\">피드백: {feedbacks[id]}</p>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {!testMode && (\n                <p className=\"text-xs text-gray-400 mt-2\">\n                  현재 단계: {card.stage} | 다음 복습:{\" \"}\n                  {card.next_review\n                    ? new Date(card.next_review).toLocaleString(\"ko-KR\")\n                    : \"-\"}\n                </p>\n              )}\n            </motion.div>\n          );\n        })\n      )}\n\n      <RelatedConceptModal\n        isOpen={isModalOpen}\n        relatedList={relatedList}\n        onSelect={handleSelectRelated}\n        onClose={handleCloseModal}\n      />\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SACEC,aAAa,EACbC,SAAS,EACTC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,UAAU,QACL,iBAAiB;AACxB,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AACvD,OAAOC,mBAAmB,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExD,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACoB,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACwB,SAAS,EAAEC,YAAY,CAAC,GAAGzB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAAC0B,SAAS,EAAEC,YAAY,CAAC,GAAG3B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAAC4B,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAAC8B,WAAW,EAAEC,cAAc,CAAC,GAAG/B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAElD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACkC,cAAc,EAAEC,iBAAiB,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACoC,WAAW,EAAEC,cAAc,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAM,CAACsC,UAAU,EAAEC,aAAa,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACwC,eAAe,EAAEC,kBAAkB,CAAC,GAAGzC,QAAQ,CAAC,KAAK,CAAC;;EAE7D;EACA,MAAM0C,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/BzB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAM0B,IAAI,GAAG,MAAM1C,aAAa,CAACiB,QAAQ,CAAC;MAC1CH,WAAW,CAAC4B,IAAI,CAAC;MAEjB,MAAMC,QAAQ,GAAG,CAAC,CAAC;QACjBC,YAAY,GAAG,CAAC,CAAC;QACjBC,aAAa,GAAG,CAAC,CAAC;QAClBC,SAAS,GAAG,CAAC,CAAC;QACdC,aAAa,GAAG,CAAC,CAAC;QAClBC,WAAW,GAAG,CAAC,CAAC;MAElBN,IAAI,CAACO,OAAO,CAAEC,CAAC,IAAK;QAClBP,QAAQ,CAACO,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE;QACxBP,YAAY,CAACM,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE;QAC5BN,aAAa,CAACK,CAAC,CAACC,OAAO,CAAC,GAAG,KAAK;QAChCL,SAAS,CAACI,CAAC,CAACC,OAAO,CAAC,GAAG,KAAK;QAC5BJ,aAAa,CAACG,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC;QAC5BH,WAAW,CAACE,CAAC,CAACC,OAAO,CAAC,GAAG,KAAK;QAC9BD,CAAC,CAACE,IAAI,GAAGF,CAAC,CAACE,IAAI,IAAI,EAAE;MACvB,CAAC,CAAC;MAEFhC,gBAAgB,CAACuB,QAAQ,CAAC;MAC1BrB,YAAY,CAACsB,YAAY,CAAC;MAC1BpB,YAAY,CAACqB,aAAa,CAAC;MAC3BnB,YAAY,CAACoB,SAAS,CAAC;MACvBlB,YAAY,CAACmB,aAAa,CAAC;MAC3BjB,cAAc,CAACkB,WAAW,CAAC;MAE3BN,IAAI,CAACO,OAAO,CAAC,MAAOI,IAAI,IAAK;QAC3B,MAAM;UAAEF,OAAO;UAAEG,SAAS;UAAEC;QAAM,CAAC,GAAGF,IAAI;QAC1C,MAAMG,QAAQ,GACXF,SAAS,KAAK,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACF,KAAK,CAAC,IAC9CD,SAAS,KAAK,SAAS,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACG,QAAQ,CAACF,KAAK,CAAE;QACxD,IAAIC,QAAQ,EAAE;UACZ,IAAI;YACF,MAAME,QAAQ,GAAG,MAAMzD,SAAS,CAACkD,OAAO,CAAC;YACzCrC,WAAW,CAAE6C,IAAI,IACfA,IAAI,CAACC,GAAG,CAAEC,IAAI,IACZA,IAAI,CAACV,OAAO,KAAKA,OAAO,GAAG;cAAE,GAAGU,IAAI;cAAET,IAAI,EAAEM;YAAS,CAAC,GAAGG,IAC3D,CACF,CAAC;UACH,CAAC,CAAC,MAAM;YACN;UAAA;QAEJ;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,MAAM;MACNC,OAAO,CAACC,KAAK,CAAC,aAAa,CAAC;IAC9B;IACA/C,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;;EAED;EACAlB,SAAS,CAAC,MAAM;IACd2C,YAAY,CAAC,CAAC;IACd,CAAC,YAAY;MACX,IAAI;QACF,MAAMuB,GAAG,GAAG,MAAM5D,UAAU,CAAC,CAAC;QAC9BkC,aAAa,CAAC0B,GAAG,CAAC;MACpB,CAAC,CAAC,MAAM;QACN;MAAA;IAEJ,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,CAAC/C,QAAQ,CAAC,CAAC;;EAEd;EACAnB,SAAS,CAAC,MAAM;IACd,MAAMmE,SAAS,GAAG,EAAE;IACpBC,MAAM,CAACC,OAAO,CAACxC,SAAS,CAAC,CAACsB,OAAO,CAAC,CAAC,CAACE,OAAO,EAAEiB,QAAQ,CAAC,KAAK;MACzD,IAAIA,QAAQ,GAAG,CAAC,EAAE;QAChB,MAAMC,EAAE,GAAGC,WAAW,CAAC,MAAM;UAC3B1C,YAAY,CAAE+B,IAAI,KAAM;YACtB,GAAGA,IAAI;YACP,CAACR,OAAO,GAAGQ,IAAI,CAACR,OAAO,CAAC,GAAG;UAC7B,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC;QACRc,SAAS,CAACM,IAAI,CAACF,EAAE,CAAC;MACpB,CAAC,MAAM,IAAID,QAAQ,KAAK,CAAC,IAAI,CAAC3C,SAAS,CAAC0B,OAAO,CAAC,IAAI5B,SAAS,CAAC4B,OAAO,CAAC,EAAE;QACtEzB,YAAY,CAAEiC,IAAI,KAAM;UAAE,GAAGA,IAAI;UAAE,CAACR,OAAO,GAAG;QAAK,CAAC,CAAC,CAAC;QACtD3B,YAAY,CAAEmC,IAAI,KAAM;UAAE,GAAGA,IAAI;UAAE,CAACR,OAAO,GAAG;QAAM,CAAC,CAAC,CAAC;MACzD;IACF,CAAC,CAAC;IACF,OAAO,MAAMc,SAAS,CAAChB,OAAO,CAACuB,aAAa,CAAC;EAC/C,CAAC,EAAE,CAAC7C,SAAS,EAAEF,SAAS,EAAEF,SAAS,CAAC,CAAC;EAErC,MAAMkD,kBAAkB,GAAGA,CAACtB,OAAO,EAAEuB,IAAI,KAAK;IAC5CtD,gBAAgB,CAAEuC,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACR,OAAO,GAAGuB;IAAK,CAAC,CAAC,CAAC;EAC5D,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAOtB,IAAI,IAAK;IACzC,MAAMgB,EAAE,GAAGhB,IAAI,CAACF,OAAO;IACvB,IAAK5B,SAAS,CAAC8C,EAAE,CAAC,IAAI,CAAC5C,SAAS,CAAC4C,EAAE,CAAC,IAAK1C,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAC,EAAE;IAE5DvC,cAAc,CAAE6B,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACU,EAAE,GAAG;IAAK,CAAC,CAAC,CAAC;IACnD7C,YAAY,CAAEmC,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACU,EAAE,GAAG;IAAK,CAAC,CAAC,CAAC;IACjD/C,YAAY,CAAEqC,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACU,EAAE,GAAG;IAAU,CAAC,CAAC,CAAC;IAEtD,IAAI;MAAA,IAAAO,qBAAA;MACF,MAAMC,MAAM,GAAG,MAAM3E,UAAU,CAC7BmE,EAAE,EACFlD,aAAa,CAACkD,EAAE,CAAC,EACjBpD,QAAQ,EACRQ,SAAS,CAAC4C,EAAE,CACd,CAAC;MACD/C,YAAY,CAAEqC,IAAI,KAAM;QAAE,GAAGA,IAAI;QAAE,CAACU,EAAE,GAAGQ,MAAM,CAACC;MAAS,CAAC,CAAC,CAAC;MAE5D,IAAID,MAAM,CAACE,SAAS,IAAI,EAAAH,qBAAA,GAAAC,MAAM,CAACG,gBAAgB,cAAAJ,qBAAA,uBAAvBA,qBAAA,CAAyBK,MAAM,IAAG,CAAC,EAAE;QAC3DjD,cAAc,CAAC6C,MAAM,CAACG,gBAAgB,CAAC;QACvC9C,iBAAiB,CAACmC,EAAE,CAAC;QACrBjC,cAAc,CAAC,IAAI,CAAC;QACpB;MACF;MAEA,IAAIyC,MAAM,CAACK,UAAU,EAAE;QACrBC,UAAU,CAAC,MAAMC,KAAK,CAAC,UAAU,CAAC,EAAE,EAAE,CAAC;QACvC3C,YAAY,CAAC,CAAC;QACd;MACF;MAEA,IAAIoC,MAAM,CAACQ,aAAa,EAAE;QACxB,MAAMC,IAAI,GAAGrE,QAAQ,GAAG,CAAC,GAAG,EAAE;QAC9BW,YAAY,CAAE+B,IAAI,KAAM;UAAE,GAAGA,IAAI;UAAE,CAACU,EAAE,GAAGiB;QAAK,CAAC,CAAC,CAAC;QACjD9D,YAAY,CAAEmC,IAAI,KAAM;UAAE,GAAGA,IAAI;UAAE,CAACU,EAAE,GAAG;QAAM,CAAC,CAAC,CAAC;QAClD;MACF;MAEAc,UAAU,CAAC,MAAMC,KAAK,CAAC,yBAAyB,CAAC,EAAE,EAAE,CAAC;MACtD3C,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC,MAAM;MACNqB,OAAO,CAACC,KAAK,CAAC,OAAO,CAAC;IACxB,CAAC,SAAS;MACRjC,cAAc,CAAE6B,IAAI,KAAM;QAAE,GAAGA,IAAI;QAAE,CAACU,EAAE,GAAG;MAAM,CAAC,CAAC,CAAC;IACtD;EACF,CAAC;EAED,MAAMkB,mBAAmB,GAAG,MAAOC,OAAO,IAAK;IAC7C,MAAMC,OAAO,GAAG,MAAMtF,UAAU,CAAC;MAC/BqF,OAAO;MACPE,MAAM,EAAE,EAAE;MACVpC,SAAS,EAAE;IACb,CAAC,CAAC;IACF8B,KAAK,CAAC,MAAMI,OAAO,uBAAuBC,OAAO,CAACC,MAAM,EAAE,CAAC;IAC3DtD,cAAc,CAAC,KAAK,CAAC;IACrBJ,cAAc,CAAC,EAAE,CAAC;IAClBE,iBAAiB,CAAC,IAAI,CAAC;IACvBO,YAAY,CAAC,CAAC;EAChB,CAAC;EAED,MAAMkD,gBAAgB,GAAGA,CAAA,KAAM;IAC7BvD,cAAc,CAAC,KAAK,CAAC;IACrBJ,cAAc,CAAC,EAAE,CAAC;IAClBE,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;EAED,MAAM0D,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACF,MAAMvF,UAAU,CAACgC,UAAU,CAAC;MAC5BG,kBAAkB,CAAC,IAAI,CAAC;MACxB2C,UAAU,CAAC,MAAM3C,kBAAkB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;IACnD,CAAC,CAAC,MAAM;MACNsB,OAAO,CAACC,KAAK,CAAC,eAAe,CAAC;IAChC;EACF,CAAC;;EAED;EACA,MAAM8B,qBAAqB,GAAGA,CAAA,KAAM;IAClC,oBACEnF,OAAA;MAAKoF,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAC5B,CAAC,GAAGC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACpC,GAAG,CAAC,CAACqC,CAAC,EAAEC,CAAC,kBACtBxF,OAAA;QAAaoF,SAAS,EAAC,eAAe;QAAAC,QAAA,gBACpCrF,OAAA;UAAKoF,SAAS,EAAC;QAAuC;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC7D5F,OAAA;UAAKoF,SAAS,EAAC;QAAuC;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC7D5F,OAAA;UAAKoF,SAAS,EAAC;QAAwC;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA,GAHtDJ,CAAC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIN,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAEV,CAAC;EAED,IAAIvF,OAAO,EAAE;IACX,oBACEL,OAAA;MAAKoF,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBAEpCrF,OAAA;QAAKoF,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACrDrF,OAAA;UAAIoF,SAAS,EAAC,qCAAqC;UAAAC,QAAA,EAAC;QAAI;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC7D5F,OAAA;UAAOoF,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBAC5CrF,OAAA;YACE6F,IAAI,EAAC,UAAU;YACfC,OAAO,EAAEvF,QAAS;YAClBwF,QAAQ,EAAEA,CAAA,KAAMvF,WAAW,CAAC,CAACD,QAAQ,CAAE;YACvC6E,SAAS,EAAC;UAAoC;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC,eACF5F,OAAA;YAAMoF,SAAS,EAAC,SAAS;YAAAC,QAAA,EAAC;UAAM;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGN5F,OAAA,CAACJ,MAAM,CAACoG,GAAG;QACTZ,SAAS,EAAC,qBAAqB;QAC/Ba,OAAO,EAAE;UAAEC,OAAO,EAAE,CAAC;UAAEC,CAAC,EAAE,CAAC;QAAG,CAAE;QAChCC,OAAO,EAAE;UAAEF,OAAO,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAE;QAC9BE,UAAU,EAAE;UAAEC,QAAQ,EAAE;QAAI,CAAE;QAAAjB,QAAA,gBAE9BrF,OAAA;UAAGoF,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAC;QAAkB;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACtD5F,OAAA;UAAKoF,SAAS,EAAC,wCAAwC;UAAAC,QAAA,gBACrDrF,OAAA;YACE6F,IAAI,EAAC,MAAM;YACXU,KAAK,EAAE5E,UAAW;YAClBoE,QAAQ,EAAGS,CAAC,IAAK5E,aAAa,CAAC4E,CAAC,CAACC,MAAM,CAACF,KAAK,CAAE;YAC/CG,WAAW,EAAC,0BAAgB;YAC5BtB,SAAS,EAAC;UAA0B;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC,eACF5F,OAAA;YAAQ2G,OAAO,EAAEzB,WAAY;YAACE,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAEzD;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACN5F,OAAA,CAACH,eAAe;UAAAwF,QAAA,EACbxD,eAAe,iBACd7B,OAAA,CAACJ,MAAM,CAACgH,CAAC;YACPxB,SAAS,EAAC,6BAA6B;YACvCa,OAAO,EAAE;cAAEC,OAAO,EAAE;YAAE,CAAE;YACxBE,OAAO,EAAE;cAAEF,OAAO,EAAE;YAAE,CAAE;YACxBW,IAAI,EAAE;cAAEX,OAAO,EAAE;YAAE,CAAE;YAAAb,QAAA,EACtB;UAED;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU;QACX;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACc,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,EAEZT,qBAAqB,CAAC,CAAC;IAAA;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrB,CAAC;EAEV;EAEA,oBACE5F,OAAA;IAAKoF,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBAEpCrF,OAAA;MAAKoF,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBACrDrF,OAAA;QAAIoF,SAAS,EAAC,qCAAqC;QAAAC,QAAA,EAAC;MAAI;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC7D5F,OAAA;QAAOoF,SAAS,EAAC,6BAA6B;QAAAC,QAAA,gBAC5CrF,OAAA;UACE6F,IAAI,EAAC,UAAU;UACfC,OAAO,EAAEvF,QAAS;UAClBwF,QAAQ,EAAEA,CAAA,KAAMvF,WAAW,CAAC,CAACD,QAAQ,CAAE;UACvC6E,SAAS,EAAC;QAAoC;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C,CAAC,eACF5F,OAAA;UAAMoF,SAAS,EAAC,SAAS;UAAAC,QAAA,EAAC;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN5F,OAAA,CAACJ,MAAM,CAACoG,GAAG;MACTZ,SAAS,EAAC,qBAAqB;MAC/Ba,OAAO,EAAE;QAAEC,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE,CAAC;MAAG,CAAE;MAChCC,OAAO,EAAE;QAAEF,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAE;MAC9BE,UAAU,EAAE;QAAEC,QAAQ,EAAE;MAAI,CAAE;MAAAjB,QAAA,gBAE9BrF,OAAA;QAAGoF,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAAC;MAAkB;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACtD5F,OAAA;QAAKoF,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACrDrF,OAAA;UACE6F,IAAI,EAAC,MAAM;UACXU,KAAK,EAAE5E,UAAW;UAClBoE,QAAQ,EAAGS,CAAC,IAAK5E,aAAa,CAAC4E,CAAC,CAACC,MAAM,CAACF,KAAK,CAAE;UAC/CG,WAAW,EAAC,0BAAgB;UAC5BtB,SAAS,EAAC;QAA0B;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC,eACF5F,OAAA;UAAQ2G,OAAO,EAAEzB,WAAY;UAACE,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAC;QAEzD;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eACN5F,OAAA,CAACH,eAAe;QAAAwF,QAAA,EACbxD,eAAe,iBACd7B,OAAA,CAACJ,MAAM,CAACgH,CAAC;UACPxB,SAAS,EAAC,6BAA6B;UACvCa,OAAO,EAAE;YAAEC,OAAO,EAAE;UAAE,CAAE;UACxBE,OAAO,EAAE;YAAEF,OAAO,EAAE;UAAE,CAAE;UACxBW,IAAI,EAAE;YAAEX,OAAO,EAAE;UAAE,CAAE;UAAAb,QAAA,EACtB;QAED;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAU;MACX;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACc,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,EAGZzF,QAAQ,CAACoE,MAAM,KAAK,CAAC,gBACpBvE,OAAA;MAAGoF,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EAAC;IAAgB;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,GAE7DzF,QAAQ,CAAC+C,GAAG,CAAEP,IAAI,IAAK;MACrB,MAAMgB,EAAE,GAAGhB,IAAI,CAACF,OAAO;MACvB,oBACEzC,OAAA,CAACJ,MAAM,CAACoG,GAAG;QAETZ,SAAS,EAAC,qBAAqB;QAC/Ba,OAAO,EAAE;UAAEC,OAAO,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAG,CAAE;QAC/BC,OAAO,EAAE;UAAEF,OAAO,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAE;QAC9BE,UAAU,EAAE;UAAEC,QAAQ,EAAE;QAAI,CAAE;QAAAjB,QAAA,gBAE9BrF,OAAA;UAAGoF,SAAS,EAAC,4BAA4B;UAAAC,QAAA,GAAC,gBAAI,EAAC1C,IAAI,CAACmC,OAAO;QAAA;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAChE5F,OAAA;UAAGoF,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAC9B1C,IAAI,CAACE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAGF,IAAI,CAACD,IAAI,IAAI;QAAY;UAAA+C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eAEJ5F,OAAA;UACE6F,IAAI,EAAC,MAAM;UACXU,KAAK,EAAE9F,aAAa,CAACkD,EAAE,CAAC,IAAI,EAAG;UAC/BoC,QAAQ,EAAGS,CAAC,IAAKzC,kBAAkB,CAACJ,EAAE,EAAE6C,CAAC,CAACC,MAAM,CAACF,KAAK,CAAE;UACxDG,WAAW,EACTzF,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAC,GACb,SAAS1C,SAAS,CAAC0C,EAAE,CAAC,GAAG,GACzB5C,SAAS,CAAC4C,EAAE,CAAC,GACb,QAAQ,GACR,WACL;UACDmD,QAAQ,EAAGjG,SAAS,CAAC8C,EAAE,CAAC,IAAI,CAAC5C,SAAS,CAAC4C,EAAE,CAAC,IAAK1C,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAE;UACjEyB,SAAS,EAAC;QAAkB;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B,CAAC,eAEF5F,OAAA;UACE2G,OAAO,EAAEA,CAAA,KAAM1C,kBAAkB,CAACtB,IAAI,CAAE;UACxCmE,QAAQ,EAAGjG,SAAS,CAAC8C,EAAE,CAAC,IAAI,CAAC5C,SAAS,CAAC4C,EAAE,CAAC,IAAK1C,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAE;UACjEyB,SAAS,EAAE,oCACRvE,SAAS,CAAC8C,EAAE,CAAC,IAAI,CAAC5C,SAAS,CAAC4C,EAAE,CAAC,IAAK1C,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAC,GAClD,gCAAgC,GAChC,gBAAgB,EACnB;UAAA0B,QAAA,EAEFlE,WAAW,CAACwC,EAAE,CAAC,gBACd3D,OAAA,CAACJ,MAAM,CAACoG,GAAG;YAACZ,SAAS,EAAC;UAA8E;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GACrG3E,SAAS,CAAC0C,EAAE,CAAC,GAAG,CAAC,GACnB,SAAS1C,SAAS,CAAC0C,EAAE,CAAC,IAAI,GACxB9C,SAAS,CAAC8C,EAAE,CAAC,IAAI,CAAC5C,SAAS,CAAC4C,EAAE,CAAC,GACjC,OAAO,GACL5C,SAAS,CAAC4C,EAAE,CAAC,GACf,KAAK,GAEL;QACD;UAAA8B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC,eAET5F,OAAA,CAACH,eAAe;UAAAwF,QAAA,EACb1E,SAAS,CAACgD,EAAE,CAAC,iBACZ3D,OAAA,CAACJ,MAAM,CAACoG,GAAG;YACTC,OAAO,EAAE;cAAEC,OAAO,EAAE;YAAE,CAAE;YACxBE,OAAO,EAAE;cAAEF,OAAO,EAAE;YAAE,CAAE;YACxBW,IAAI,EAAE;cAAEX,OAAO,EAAE;YAAE,CAAE;YACrBd,SAAS,EAAC,MAAM;YAAAC,QAAA,eAEhBrF,OAAA;cAAGoF,SAAS,EAAC,yBAAyB;cAAAC,QAAA,GAAC,sBAAK,EAAC1E,SAAS,CAACgD,EAAE,CAAC;YAAA;cAAA8B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrD;QACb;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACc,CAAC,EAEjB,CAACrF,QAAQ,iBACRP,OAAA;UAAGoF,SAAS,EAAC,4BAA4B;UAAAC,QAAA,GAAC,6BACjC,EAAC1C,IAAI,CAACE,KAAK,EAAC,+BAAS,EAAC,GAAG,EAC/BF,IAAI,CAACoE,WAAW,GACb,IAAIC,IAAI,CAACrE,IAAI,CAACoE,WAAW,CAAC,CAACE,cAAc,CAAC,OAAO,CAAC,GAClD,GAAG;QAAA;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CACJ;MAAA,GApEIjC,EAAE;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAqEG,CAAC;IAEjB,CAAC,CACF,eAED5F,OAAA,CAACF,mBAAmB;MAClBoH,MAAM,EAAEzF,WAAY;MACpBJ,WAAW,EAAEA,WAAY;MACzB8F,QAAQ,EAAEtC,mBAAoB;MAC9BuC,OAAO,EAAEnC;IAAiB;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3B,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAC1F,EAAA,CA5YuBD,UAAU;AAAAoH,EAAA,GAAVpH,UAAU;AAAA,IAAAoH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}